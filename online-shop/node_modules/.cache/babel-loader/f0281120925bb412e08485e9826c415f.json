{"ast":null,"code":"import _classCallCheck from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/src/Components/mylogin/Verify.js\";\nimport React from 'react';\nimport './login.css';\nimport { NavLink } from \"react-router-dom\";\nimport TextField from \"@material-ui/core/TextField\";\nimport './mylogin.css';\nimport Avatar from '@material-ui/core/Avatar';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport { isEmail, isEmpty } from './validator';\nimport { encode } from \"base-64\";\nvar code_to_Verify = \"\";\nvar code = '';\n\nvar Verify =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Verify, _React$Component);\n\n  function Verify(props) {\n    var _this;\n\n    _classCallCheck(this, Verify);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Verify).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      var formData = _this.state.formData;\n      formData[name] = value;\n\n      _this.setState({\n        formData: formData\n      });\n    };\n\n    _this.validateLoginForm = function (e) {\n      var errors = {};\n      var formData = _this.state.formData;\n\n      if (isEmpty(formData.code)) {\n        errors.code = \"Code Can't be Blank\";\n\n        _this.generatePartialPassword(localStorage.getItem('userName'));\n\n        return errors;\n      } else {\n        _this.verifyOtp(localStorage.getItem('phoneNumber'), formData.code);\n\n        setTimeout(function () {\n          console.log(_this.state.otpVerifyResponse.errorMessage);\n\n          if (_this.state.otpVerifyResponse.valid === 'true') {\n            setTimeout(function () {\n              alert(\"OTP has been verified\");\n\n              _this.generatePartialPassword(localStorage.getItem('userName'));\n\n              setTimeout(function () {\n                localStorage.setItem('index1', _this.state.partialPasswordGenerateResponse.index1);\n                localStorage.setItem('index2', _this.state.partialPasswordGenerateResponse.index2);\n                localStorage.setItem('index3', _this.state.partialPasswordGenerateResponse.index3);\n\n                _this.props.history.push('/Partial');\n              }, 3000);\n            }, 3000);\n          } else {\n            alert(\"Unable to verify OTP code\");\n            return errors;\n          }\n        }, 2000);\n      }\n\n      console.log(errors.code);\n      return errors;\n    };\n\n    _this.state = {\n      number: '',\n      code: '',\n      formData: {},\n      errors: {},\n      otpVerifyResponse: [],\n      partialPasswordGenerateResponse: []\n    };\n    _this.handleCode = _this.handleCode.bind(_assertThisInitialized(_this));\n    _this.handleC = _this.handleC.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Verify, [{\n    key: \"handleC\",\n    value: function handleC(event) {\n      this.setState({\n        code: event.target.value\n      });\n      code = this.state.code;\n    }\n  }, {\n    key: \"verifyOtp\",\n    value: function verifyOtp(number, c) {\n      var _this2 = this;\n\n      var usernameAuth = '123';\n      var passwordAuth = '123';\n      fetch('http://localhost:8080/otp/verify', {\n        method: 'POST',\n        body: JSON.stringify({\n          phoneNumber: number,\n          code: c\n        }),\n        headers: {\n          'Authorization': 'Basic ' + encode(usernameAuth + \":\" + passwordAuth),\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        _this2.setState({\n          otpVerifyResponse: json\n        });\n      });\n    }\n  }, {\n    key: \"generatePartialPassword\",\n    value: function generatePartialPassword(username) {\n      var _this3 = this;\n\n      var usernameAuth = '123';\n      var passwordAuth = '123';\n      fetch('http://localhost:8080/validate/generatePartialPassword', {\n        method: 'POST',\n        body: JSON.stringify({\n          userName: username\n        }),\n        headers: {\n          'Authorization': 'Basic ' + encode(usernameAuth + \":\" + passwordAuth),\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        _this3.setState({\n          partialPasswordGenerateResponse: json\n        });\n      });\n    }\n  }, {\n    key: \"handleCode\",\n    value: function handleCode(e) {\n      // this.verifyOtp(this.state.number, this.state.code);\n      e.preventDefault();\n      var errors = this.validateLoginForm();\n\n      if (errors === true) {\n        this.verifyOtp(this.state.number, this.state.code);\n      } else {\n        this.setState({\n          errors: errors,\n          formSubmitted: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var errors = this.state.errors;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"limiter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"container-login100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        \"class-\": \"wrap-login100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"lo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        class: \"avatar2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(LockOutlinedIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"otp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"OTP\")), React.createElement(\"form\", {\n        class: \"lo\",\n        onSubmit: this.handleCode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"wrap-input100 validate-input \",\n        \"data-validate\": \"username is required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        class: \"fields\",\n        type: \"text\",\n        name: \"code\",\n        placeholder: \"Verification code\",\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), errors.code && React.createElement(\"div\", {\n        class: \"errors\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, errors.code)), React.createElement(\"div\", {\n        class: \"container-login100-form-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"login100-form-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Login\"))))))), React.createElement(NavLink, {\n        to: \"/partial\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"click here to go to partial password\"));\n    }\n  }]);\n\n  return Verify;\n}(React.Component);\n\nexport default Verify;","map":{"version":3,"sources":["/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/src/Components/mylogin/Verify.js"],"names":["React","NavLink","TextField","Avatar","LockOutlinedIcon","isEmail","isEmpty","encode","code_to_Verify","code","Verify","props","handleInputChange","event","target","value","name","formData","state","setState","validateLoginForm","e","errors","generatePartialPassword","localStorage","getItem","verifyOtp","setTimeout","console","log","otpVerifyResponse","errorMessage","valid","alert","setItem","partialPasswordGenerateResponse","index1","index2","index3","history","push","number","handleCode","bind","handleC","c","usernameAuth","passwordAuth","fetch","method","body","JSON","stringify","phoneNumber","headers","then","response","json","username","userName","preventDefault","formSubmitted","Component"],"mappings":"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","sourcesContent":["import React, { } from 'react';\r\nimport './login.css';\r\nimport { NavLink, } from \"react-router-dom\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport './mylogin.css';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport { isEmail, isEmpty } from './validator';\r\nimport { encode } from \"base-64\";\r\nlet code_to_Verify = \"\";\r\nlet code = '';\r\n\r\nclass Verify extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            number: '',\r\n            code: '',\r\n            formData: {},\r\n            errors: {},\r\n            otpVerifyResponse: [],\r\n            partialPasswordGenerateResponse: []\r\n\r\n        };\r\n        this.handleCode = this.handleCode.bind(this);\r\n        this.handleC = this.handleC.bind(this);\r\n    }\r\n    \r\n\r\n    handleC(event) {\r\n        this.setState({ code: event.target.value });\r\n        code = this.state.code;\r\n    }\r\n\r\n    handleInputChange = (event) => {\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let { formData } = this.state;\r\n        formData[name] = value;\r\n\r\n        this.setState({\r\n            formData: formData\r\n        });\r\n    }\r\n\r\n\r\n    verifyOtp(number, c) {\r\n        let usernameAuth = '123';\r\n        let passwordAuth = '123';\r\n        fetch('http://localhost:8080/otp/verify', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                phoneNumber: number,\r\n                code: c,\r\n            }),\r\n            headers: {\r\n                'Authorization': 'Basic ' + encode(usernameAuth + \":\" + passwordAuth),\r\n                \"Content-type\": \"application/json; charset=UTF-8\"\r\n            }\r\n        }).then(response => {\r\n            return response.json()\r\n        }).then(json => {\r\n            this.setState({\r\n                otpVerifyResponse: json\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    generatePartialPassword(username) {\r\n        let usernameAuth = '123';\r\n        let passwordAuth = '123';\r\n        fetch('http://localhost:8080/validate/generatePartialPassword', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                userName: username,\r\n            }),\r\n            headers: {\r\n                'Authorization': 'Basic ' + encode(usernameAuth + \":\" + passwordAuth),\r\n                \"Content-type\": \"application/json; charset=UTF-8\"\r\n            }\r\n        }).then(response => {\r\n            return response.json()\r\n        }).then(json => {\r\n            this.setState({\r\n                partialPasswordGenerateResponse: json\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    validateLoginForm = (e) => \r\n    {\r\n       \r\n        let errors = {};\r\n        const { formData } = this.state;\r\n        if (isEmpty(formData.code)) \r\n        {\r\n            errors.code = \"Code Can't be Blank\";\r\n            this.generatePartialPassword(localStorage.getItem('userName'));\r\n            return errors;\r\n        } \r\n        else\r\n        {\r\n            this.verifyOtp(localStorage.getItem('phoneNumber'), formData.code);\r\n            setTimeout(()=>\r\n            {\r\n                console.log(this.state.otpVerifyResponse.errorMessage)\r\n                if(this.state.otpVerifyResponse.valid === 'true')\r\n                {\r\n                    setTimeout(()=>\r\n                    {\r\n                        alert(\"OTP has been verified\")\r\n                        this.generatePartialPassword(localStorage.getItem('userName'));\r\n                        setTimeout(()=>\r\n                        {\r\n                            localStorage.setItem('index1', this.state.partialPasswordGenerateResponse.index1)\r\n                            localStorage.setItem('index2', this.state.partialPasswordGenerateResponse.index2)\r\n                            localStorage.setItem('index3', this.state.partialPasswordGenerateResponse.index3)\r\n                            this.props.history.push('/Partial')\r\n                        },3000);\r\n                    \r\n                    },3000);\r\n                }\r\n                else\r\n                {\r\n                    alert(\"Unable to verify OTP code\")\r\n                    return errors;\r\n                }\r\n            },2000);\r\n    \r\n        }\r\n        console.log(errors.code)\r\n        return errors\r\n    }\r\n\r\n    handleCode(e) {\r\n       // this.verifyOtp(this.state.number, this.state.code);\r\n\r\n        e.preventDefault();\r\n        let errors = this.validateLoginForm();\r\n\r\n        if (errors === true) {\r\n            this.verifyOtp(this.state.number, this.state.code)\r\n\r\n        } else {\r\n\r\n            this.setState({\r\n\r\n                errors: errors,\r\n                formSubmitted: true\r\n            });\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n    \r\n        return (\r\n           <div>\r\n                <div>\r\n                    <div  class=\"limiter\">\r\n                        <div class=\"container-login100\">\r\n                            <div class-=\"wrap-login100\">\r\n                                <div class=\"lo\">\r\n                                    <Avatar class=\"avatar2\">\r\n                                        <LockOutlinedIcon />\r\n                                    </Avatar>\r\n                                    <div class=\"otp\">\r\n                                        OTP\r\n                                </div>\r\n                                </div>\r\n                                <form class=\"lo\" onSubmit={this.handleCode}>\r\n\r\n                                    <div class=\"wrap-input100 validate-input \"\r\n                                        data-validate=\"username is required\">\r\n\r\n                                        <TextField class=\"fields\"type=\"text\" name=\"code\" placeholder=\"Verification code\" onChange={this.handleInputChange} />\r\n                                        {errors.code &&\r\n                                            <div class=\"errors\">{errors.code}</div>\r\n                                        }\r\n\r\n                                    </div>\r\n\r\n\r\n\r\n\r\n\r\n                                    <div class=\"container-login100-form-btn\">\r\n                                        <button class=\"login100-form-btn\" >\r\n                                            Login\r\n                                </button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div >\r\n                </div>\r\n                <NavLink to=\"/partial\">click here to go to partial password</NavLink>\r\n\r\n            </div>\r\n\r\n\r\n           \r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default Verify\r\n"]},"metadata":{},"sourceType":"module"}