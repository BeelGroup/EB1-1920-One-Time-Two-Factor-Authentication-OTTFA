{"ast":null,"code":"import _objectSpread from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/src/Components/mylogin/register.js\";\nimport React, { Component } from \"react\"; //import { Row, FormGroup, FormControl, ControlLabel, Button, FormText } from 'react-bootstrap';\n\nimport './login.css';\nimport './mylogin.css';\nimport { isEmail, isEmpty } from './validator';\nimport { NavLink } from \"react-router-dom\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Avatar from '@material-ui/core/Avatar';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport './mylogin.css';\n\nvar register =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(register, _Component);\n\n  function register(props) {\n    var _this;\n\n    _classCallCheck(this, register);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(register).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      var formData = _this.state.formData;\n      formData[name] = value;\n\n      _this.setState({\n        formData: formData\n      });\n    };\n\n    _this.validateLoginForm = function (e) {\n      var errors = {};\n      var formData = _this.state.formData;\n\n      if (isEmpty(formData.email)) {\n        errors.email = \"Email can't be blank\";\n        return errors;\n      } else if (!isEmail(formData.email)) {\n        errors.email = \"Please enter a valid email\";\n        return errors;\n      } else if (isEmpty(formData.password)) {\n        errors.password = \"Password can't be blank\";\n        return errors;\n      } else {\n        _this.validateUser(formData.email, formData.password);\n\n        setTimeout(function () {\n          if (_this.state.validateResponse.valid === true) {\n            alert(\"Login Successful\");\n\n            _this.props.history.push('/dark');\n\n            return true;\n          } else {\n            alert(\"Login Failed\");\n            errors.password = \"incorrect password\";\n            return false;\n          }\n        }, 1000);\n      }\n\n      return false;\n    };\n\n    _this.addProduct = function (_) {\n      var product = _this.state.product; //console.log(product.email);\n\n      var url = 'http://localhost:4000/products/add?email=' + product.email + '&password=' + product.password + '&phone_number=' + product.phone_number;\n      console.log(url);\n      fetch(url).then(_this.getProducts).catch(function (err) {\n        return console.error(err);\n      });\n\n      _this.props.history.push('/login');\n    };\n\n    _this.login = function (e) {\n      console.log(localStorage.getItem('login_status'));\n      localStorage.setItem('login_status', '');\n      e.preventDefault();\n\n      var errors = _this.validateLoginForm();\n\n      if (errors === true) {\n        alert(\"You are successfully signed in...\");\n        localStorage.setItem('login_status', '');\n        var formData = _this.state.formData;\n        localStorage.setItem('reg_status', 'Logout');\n        localStorage.setItem('db_email', formData.email);\n\n        _this.props.history.push('/dark');\n      } else {\n        _this.setState({\n          errors: errors,\n          formSubmitted: true\n        });\n      }\n    };\n\n    _this.state = {\n      user: null,\n      formData: {},\n      // Contains login form data\n      errors: {},\n      // Contains login field errors\n      formSubmitted: false,\n      // Indicates submit status of login form\n      loading: false,\n      // Indicates in progress state of login form\n      validateResponse: [],\n      product: {\n        email: '',\n        password: '',\n        phone_number: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(register, [{\n    key: \"validateUser\",\n    value: function validateUser(username, password) {\n      var _this2 = this;\n\n      var headers = new Headers();\n      fetch('http://localhost:8080/validate/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          userName: username,\n          password: password\n        }),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        _this2.setState({\n          validateResponse: json\n        });\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      var test = \"yess\";\n      var x = test.charAt(1);\n      console.log(x);\n    }\n  }, {\n    key: \"signOut\",\n    value: function signOut() {\n      this.setState({\n        user: null\n      });\n    }\n  }, {\n    key: \"signIn\",\n    value: function signIn(username, password) {\n      this.setState({\n        user: {\n          username: username,\n          password: password\n        }\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var star = \"\";\n      var product = this.state.product;\n\n      for (var i = 0; i < product.password.length; i++) {\n        star += '*';\n      }\n\n      return star;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          products = _this$state.products,\n          product = _this$state.product;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"limiter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"container-login100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        \"class-\": \"wrap-login100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"lo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        class: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(LockOutlinedIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"log\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Register\")), React.createElement(\"form\", {\n        className: \"login100-form validate-form\",\n        onSubmit: this.addProduct,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"wrap-input100 validate-input \",\n        \"data-validate\": \"username is required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Enter your email:\", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        class: \"fields\",\n        value: product.email,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            product: _objectSpread({}, product, {\n              email: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"wrap-input100 validate-input \",\n        \"data-validate\": \"username is required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Enter your password:\", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        class: \"fields\",\n        value: product.password,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            product: _objectSpread({}, product, {\n              password: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"wrap-input100 validate-input \",\n        \"data-validate\": \"username is required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Enter your phone number:\", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        class: \"fields\",\n        value: product.phone_number,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            product: _objectSpread({}, product, {\n              phone_number: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"container-login100-form-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"login100-form-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Register\")), React.createElement(NavLink, {\n        class: \"link\",\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"already have an account? Login \"))))));\n    }\n  }]);\n\n  return register;\n}(Component);\n\nexport default register;","map":{"version":3,"sources":["/Users/jackengels1/Desktop/Workspace/eBusiness/Ebusiness-Project/online-shop/src/Components/mylogin/register.js"],"names":["React","Component","isEmail","isEmpty","NavLink","TextField","Avatar","LockOutlinedIcon","register","props","handleInputChange","event","target","value","name","formData","state","setState","validateLoginForm","e","errors","email","password","validateUser","setTimeout","validateResponse","valid","alert","history","push","addProduct","_","product","url","phone_number","console","log","fetch","then","getProducts","catch","err","error","login","localStorage","getItem","setItem","preventDefault","formSubmitted","user","loading","username","headers","Headers","method","body","JSON","stringify","userName","response","json","test","x","charAt","star","i","length","products"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n//import { Row, FormGroup, FormControl, ControlLabel, Button, FormText } from 'react-bootstrap';\r\nimport './login.css';\r\nimport './mylogin.css';\r\n\r\nimport { isEmail, isEmpty } from './validator';\r\n\r\nimport { NavLink, } from \"react-router-dom\";\r\n\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport './mylogin.css';\r\n\r\n\r\n\r\nclass register extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            user: null,\r\n            formData: {}, // Contains login form data\r\n            errors: {}, // Contains login field errors\r\n            formSubmitted: false, // Indicates submit status of login form\r\n            loading: false, // Indicates in progress state of login form\r\n            validateResponse: [],\r\n            product: {\r\n                email: '',\r\n                password: '',\r\n                phone_number: ''\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    handleInputChange = (event) => {\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let { formData } = this.state;\r\n        formData[name] = value;\r\n\r\n        this.setState({\r\n            formData: formData\r\n        });\r\n    }\r\n\r\n    validateLoginForm = (e) => {\r\n\r\n        let errors = {};\r\n        const { formData } = this.state;\r\n\r\n        if (isEmpty(formData.email)) {\r\n            errors.email = \"Email can't be blank\";\r\n            return errors;\r\n        } else if (!isEmail(formData.email)) {\r\n            errors.email = \"Please enter a valid email\";\r\n            return errors;\r\n        }\r\n\r\n        else if (isEmpty(formData.password)) {\r\n            errors.password = \"Password can't be blank\";\r\n            return errors;\r\n        }\r\n\r\n        else {\r\n            this.validateUser(formData.email, formData.password);\r\n            setTimeout(() => {\r\n                if (this.state.validateResponse.valid === true) {\r\n                    alert(\"Login Successful\");\r\n                    this.props.history.push('/dark');\r\n                    return true;\r\n                }\r\n                else {\r\n                    alert(\"Login Failed\");\r\n                    errors.password = \"incorrect password\";\r\n                    return false\r\n                }\r\n            }, 1000);\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    validateUser(username, password) {\r\n        let headers = new Headers();\r\n        fetch('http://localhost:8080/validate/login', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                userName: username,\r\n                password: password,\r\n            }),\r\n            headers: {\r\n                \"Content-type\": \"application/json; charset=UTF-8\"\r\n            }\r\n        }).then(response => {\r\n            return response.json()\r\n        }).then(json => {\r\n            this.setState({\r\n                validateResponse: json\r\n            });\r\n        });\r\n    }\r\n\r\n    check() {\r\n        var test = \"yess\";\r\n        var x = test.charAt(1);\r\n        console.log(x);\r\n    }\r\n    signOut() {\r\n        this.setState({ user: null })\r\n    }\r\n\r\n    signIn(username, password) {\r\n        this.setState({\r\n            user: {\r\n                username,\r\n                password,\r\n            }\r\n        })\r\n    }\r\n\r\n    addProduct = _ => {\r\n        const { product } = this.state;\r\n        //console.log(product.email);\r\n        const url = 'http://localhost:4000/products/add?email=' + product.email + '&password=' + product.password + '&phone_number=' + product.phone_number;\r\n        console.log(url);\r\n        fetch(url)\r\n            .then(this.getProducts)\r\n            .catch(err => console.error(err))\r\n                \r\n        this.props.history.push('/login');\r\n    }\r\n    login = (e) => {\r\n        console.log(localStorage.getItem('login_status'));\r\n        localStorage.setItem('login_status', '');\r\n\r\n        e.preventDefault();\r\n        let errors = this.validateLoginForm();\r\n\r\n        if (errors === true) {\r\n            alert(\"You are successfully signed in...\");\r\n            localStorage.setItem('login_status', '');\r\n            const { formData } = this.state;\r\n            localStorage.setItem('reg_status', 'Logout')\r\n            localStorage.setItem('db_email', formData.email);\r\n            this.props.history.push('/dark')\r\n        } else {\r\n            this.setState({\r\n                errors: errors,\r\n                formSubmitted: true\r\n            });\r\n        }\r\n    }\r\n    hide() {\r\n        let star = \"\";\r\n        const { product } = this.state;\r\n        for (let i = 0; i < product.password.length; i++) {\r\n            star += '*';\r\n        }\r\n        return star;\r\n    }\r\n    render() {\r\n        const { products, product } = this.state;        return (\r\n            <div>\r\n                <div class=\"limiter\">\r\n                    <div class=\"container-login100\">\r\n                        <div class-=\"wrap-login100\">\r\n                            <div class=\"lo\">\r\n                                <Avatar class=\"avatar\">\r\n                                    <LockOutlinedIcon />\r\n                                </Avatar>\r\n                                <div class=\"log\">\r\n                                    Register\r\n                                </div>\r\n                            </div>\r\n                            <form className=\"login100-form validate-form\" onSubmit={this.addProduct}>\r\n\r\n                                <div class=\"wrap-input100 validate-input \"\r\n                                    data-validate=\"username is required\">\r\n                                Enter your email:<p>\r\n                                        <TextField class=\"fields\" value={product.email}\r\n                                        onChange={e => this.setState({ product: { ...product, email: e.target.value } })} /></p>\r\n                                    \r\n\r\n\r\n                                </div>\r\n                                <div class=\"wrap-input100 validate-input \"\r\n                                    data-validate=\"username is required\">\r\n                                    Enter your password:<p>\r\n                                        <TextField class=\"fields\" value={product.password}\r\n                                            onChange={e => this.setState({ product: { ...product, password: e.target.value } })} /></p>\r\n\r\n\r\n\r\n                                </div>\r\n\r\n                                <div class=\"wrap-input100 validate-input \"\r\n                                    data-validate=\"username is required\">\r\n                                    Enter your phone number:<p>\r\n                                        <TextField class=\"fields\" value={product.phone_number}\r\n                                            onChange={e => this.setState({ product: { ...product, phone_number: e.target.value } })} /></p>\r\n\r\n\r\n\r\n                                </div>\r\n                                <div class=\"container-login100-form-btn\">\r\n                                    <button class=\"login100-form-btn\" >\r\n                                        Register\r\n                                </button>\r\n                                </div>\r\n                                <NavLink class=\"link\" to=\"/login\">already have an account? Login </NavLink>\r\n\r\n                            </form>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div >\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default register;\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}